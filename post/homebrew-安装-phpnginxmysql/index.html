<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.45.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Homebrew å®‰è£… PHPã€Nginxã€MySql &middot; My New Hugo Site</title>

  
  <link type="text/css" rel="stylesheet" href="http://guopuke.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="http://guopuke.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="http://guopuke.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="http://guopuke.github.io/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="My New Hugo Site" />

  
</head>

  <body class=" ">
  <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://guopuke.github.io/"><h1>My New Hugo Site</h1></a>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="http://guopuke.github.io/">Home</a> </li>
      
    </ul>

    <p>&copy; 2018. All rights reserved. </p>
  </div>
</div>

    <div class="content container">
    <div class="post">
  <h1>Homebrew å®‰è£… PHPã€Nginxã€MySql</h1>
  <span class="post-date">Wed, Apr 19, 2017</span>
  

<p>å‚è€ƒ <a href="https://laravel-china.org/topics/3129/new-installation-mac-os-sierra-1012-and-use-homebrew-to-install-zsh-mnmp-mac-nginx-mysql-php-development-environment">å…¨æ–°å®‰è£… Mac OS Sierra (10.12) å¹¶ä½¿ç”¨ HomeBrew å®‰è£… ZSH + MNMP (Mac + Nginx + MySQL + PHP) å¼€å‘ç¯å¢ƒ</a></p>

<h4 id="å®‰è£…-mysql">å®‰è£… Mysql</h4>

<p>æŸ¥æ‰¾ mysql</p>

<pre><code class="language-powershell">âœ  ~ brew search mysql
automysqlbackup                      mysql-connector-c
homebrew/php/php53-mysqlnd_ms        mysql-connector-c++
homebrew/php/php54-mysqlnd_ms        mysql-sandbox
homebrew/php/php55-mysqlnd_ms        mysql-search-replace
homebrew/php/php56-mysqlnd_ms        mysql-utilities
mysql                                mysql@5.5
mysql++                              mysql@5.6
mysql-cluster                        mysqltuner
Caskroom/cask/mysql-connector-python
Caskroom/cask/mysql-shell
Caskroom/cask/mysql-utilities
Caskroom/cask/mysqlworkbench
Caskroom/cask/navicat-for-mysql
Caskroom/cask/sqlpro-for-mysql
</code></pre>

<p>æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</p>

<pre><code class="language-powershell">âœ  ~ brew info mysql
mysql: stable 5.7.17 (bottled)
</code></pre>

<p>æ‰§è¡Œå®‰è£…</p>

<pre><code class="language-powershell">âœ  ~ brew install mysql
# ç•¥...
# å®‰è£…å®Œæˆå, å€’æ•°ç¬¬ä¸‰è¡Œ:
# We've installed your MySQL database without a root password. To secure it run:
#    mysql_secure_installation

# To connect run:
#    mysql -uroot
</code></pre>

<p>ä¸Šé¢å®‰è£…æˆåŠŸåæç¤ºçš„æ„æ€æ˜¯è¯´, ä½ å®‰è£…çš„ MySql æ²¡æœ‰å¯†ç , æ‰§è¡Œ<code>mysql_secure_installation</code> è¿›è¡Œè®¾ç½®å¯†ç , å…¶ä¸­ä¼šæç¤ºå¾ˆå¤šä¿¡æ¯è®©ä½ è®¾ç½®, æ ¹æ®æç¤ºè‡ªå·±è®¾ç½®å°±è¡Œäº†ã€‚</p>

<p>è¿›å…¥ MySqlï¼Œçœ‹çœ‹æ˜¯å¦å·²ç»æˆåŠŸ</p>

<pre><code class="language-powershell">âœ  ~ mysql -uroot -p
</code></pre>

<p>æŸ¥çœ‹æ•°æ®åº“</p>

<pre><code class="language-mysql">mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.00 sec)
</code></pre>

<p>OK! MySqlå·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p>

<pre><code class="language-Mysql"># æ‰§è¡Œ exit é€€å‡º MySql
mysql&gt; exit
</code></pre>

<h4 id="å®‰è£…-php">å®‰è£… PHP</h4>

<p>æœç´¢PHP70ç‰ˆæœ¬<code>brew search php</code> å¦‚æœæœ‰æç¤ºä¿¡æ¯ï¼Œé‚£å°±éœ€è¦æŒ‰ç…§æç¤ºæ¥æ·»åŠ PHP æ‰©å±•ï¼š</p>

<pre><code class="language-powershell">âœ  ~ brew tap homebrew/dupes
âœ  ~ brew tap josegonzalez/homebrew-php
</code></pre>

<p>æ­¤æ—¶å°±å¯ä»¥æ­£å¸¸æœç´¢å®‰è£… PHP äº†ï¼Œä»¥ä¸‹å‚æ•°å¯ä»¥ä½¿ç”¨ <code>brew options php70</code> æ¥æ ¹æ®è‡ªå·±éœ€æ±‚æ·»åŠ å®‰è£…</p>

<pre><code class="language-powershell">âœ  ~ brew install php70 --with-debug --with-gmp --with-homebrew-curl --with-homebrew-libressl --with-homebrew-libxml2 --with-homebrew-libxslt --with-imap --with-libmysql --with-mssql --with-pear
</code></pre>

<p>å®‰è£…å®Œæˆåï¼Œè¦†ç›– macOS è‡ªå¸¦çš„ PATH è·¯å¾„ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†è·¯å¾„æ·»åŠ <code>~/.bash_profile</code>æ–‡ä»¶:</p>

<pre><code class="language-powershell">âœ  ~ echo 'export PATH=&quot;$(brew --prefix php70)/bin:$PATH&quot;' &gt;&gt; ~/.bash_profile
âœ  ~ echo 'export PATH=&quot;$(brew --prefix php70)/sbin:$PATH&quot;' &gt;&gt; ~/.bash_profile
âœ  ~ echo 'export PATH=&quot;/usr/local/bin:/usr/local/sbib:$PATH&quot;' &gt;&gt; ~/.bash_profile
</code></pre>

<p>æ·»åŠ å®ŒæˆåæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯, å‡ºç°ä»¥ä¸‹æç¤ºè¯´æ˜å·²æ­£å¸¸å·¥ä½œ:</p>

<pre><code class="language-powershell">âœ  ~ php -v
PHP 7.0.18 (cli) (built: Apr 28 2017 10:34:29) ( NTS DEBUG )
Copyright (c) 1997-2017 The PHP Group
Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies
âœ  ~ php-fpm -v
PHP 7.0.18 (fpm-fcgi) (built: Apr 28 2017 10:34:35) (DEBUG)
Copyright (c) 1997-2017 The PHP Group
Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies
</code></pre>

<p>å¯åŠ¨ PHP-FPM:</p>

<pre><code class="language-powershell"># å…ˆå°†ç³»ç»Ÿè‡ªå¸¦ php-fpm æ€æ­»
âœ  ~ killall php-fpm
# å¯åŠ¨7.0ç‰ˆæœ¬çš„ php-fpm
âœ  ~ sudo php-fpm -D
</code></pre>

<h4 id="å®‰è£…-nginx">å®‰è£… Nginx</h4>

<pre><code class="language-powershell">âœ  ~ brew install nginx
Updating Homebrew...
==&gt; Downloading https://homebrew.bintray.com/bottles/nginx-1.10.3.sierra.bottle.tar.gz
Already downloaded: /Users/surprisepeas/Library/Caches/Homebrew/nginx-1.10.3.sierra.bottle.tar.gz
==&gt; Pouring nginx-1.10.3.sierra.bottle.tar.gz
==&gt; Using the sandbox
==&gt; Caveats
Docroot is: /usr/local/var/www

The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that
nginx can run without sudo.

nginx will load all files in /usr/local/etc/nginx/servers/.

To have launchd start nginx now and restart at login:
  brew services start nginx
Or, if you don't want/need a background service you can just run:
  nginx
==&gt; Summary
ğŸº  /usr/local/Cellar/nginx/1.10.3: 8 files, 980.9KB
âœ  ~ nginx -v
nginx version: nginx/1.10.3
</code></pre>

<p>å¯åŠ¨ Nginx:</p>

<pre><code class="language-powershell">âœ  ~ sudo nginx
#      	  é‡æ–°åŠ è½½é…ç½®|é‡å¯  |åœæ­¢|é€€å‡º
âœ  ~ nginx -s reload|reopen|stop|quit
âœ  ~ nginx -s stop
</code></pre>

<p>é‡ç½®nginx.confæ–‡ä»¶</p>

<pre><code class="language-powershell">nginx -c /usr/local/etc/nginx/nginx.conf
</code></pre>

<p>é…ç½® <code>/usr/local/etc/nginx/nginx.conf</code> :</p>

<pre><code class="language-powershell">worker_processes  1;

error_log   /usr/local/var/log/nginx/error.log debug;
pid        /usr/local/var/run/nginx.pid;

events {
    worker_connections  256;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                      '$status $body_bytes_sent &quot;$http_referer&quot; '
                      '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';

    access_log  /usr/local/var/log/nginx/access.log  main;

    sendfile        on;
    keepalive_timeout  65;
    port_in_redirect off;

    include /usr/local/etc/nginx/servers/*;
}
</code></pre>

<p>æ·»åŠ  <code>php-fpm</code> æ–‡ä»¶,</p>

<pre><code class="language-powershell">âœ  ~ vi /usr/local/etc/nginx/php-fpm
</code></pre>

<pre><code class="language-powershell">location ~ \.php$ {
  try_files                   $uri = 404;
  fastcgi_pass                127.0.0.1:9000;
  fastcgi_index               index.php;
  fastcgi_intercept_errors    on;
  include /usr/local/etc/nginx/fastcgi.conf;
}
</code></pre>

<p>åœ¨ <code>/usr/local/var/www</code> ç›®å½•ä¸‹åˆ›å»ºé¡¹ç›®æ–‡ä»¶,</p>

<pre><code class="language-powershell">âœ  ~ vi /usr/local/var/www/info.php
# åœ¨ info.php æ–‡ä»¶å†™å…¥
&lt;?php info(); ?&gt;
</code></pre>

<p>åˆ›å»ºé…ç½®ç«™ç‚¹ç›®å½•çš„é…ç½®æ–‡ä»¶:</p>

<pre><code class="language-powershell">âœ  ~ vi /usr/local/etc/nginx/servers/default.conf
</code></pre>

<p>åœ¨ <code>default.conf</code> æ–‡ä»¶ä¸­å†™å…¥:</p>

<pre><code class="language-Shell">server {
    listen       80;
    server_name  localhost;
    root         /usr/local/var/www/default;

    access_log  /usr/local/var/log/nginx/default.access.log  main;

    location / {
        index  index.html index.htm index.php;
        autoindex   on;
        include     /usr/local/etc/nginx/php-fpm;
    }

    error_page  404     /404.html;
    error_page  403     /403.html;
}
</code></pre>

<p>é‡å¯ nginxæœåŠ¡:</p>

<pre><code class="language-powershell">âœ  ~ sudo nginx -s reload
</code></pre>

<p>æ‰“å¼€æµè§ˆå™¨é”®å…¥åœ°å€ <a href="http://localhost/info.php">http://localhost/info.php</a> <img src="http://omixc2ggv.bkt.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202017-04-28%2014.44.33.png" alt="web" /></p>

</div>


    </div>

    
  </body>
</html>